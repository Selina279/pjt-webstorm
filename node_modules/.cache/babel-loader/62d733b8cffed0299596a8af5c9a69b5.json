{"remainingRequest":"/Users/selina/Documents/Vueworkspace/vuewebstrom/yourparttime/node_modules/babel-loader/lib/index.js!/Users/selina/Documents/Vueworkspace/vuewebstrom/yourparttime/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/selina/Documents/Vueworkspace/vuewebstrom/yourparttime/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/selina/Documents/Vueworkspace/vuewebstrom/yourparttime/src/views/sys/SysUser.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/selina/Documents/Vueworkspace/vuewebstrom/yourparttime/src/views/sys/SysUser.vue","mtime":1588754773297},{"path":"/Users/selina/Documents/Vueworkspace/vuewebstrom/yourparttime/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/selina/Documents/Vueworkspace/vuewebstrom/yourparttime/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/selina/Documents/Vueworkspace/vuewebstrom/yourparttime/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/selina/Documents/Vueworkspace/vuewebstrom/yourparttime/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZm9yLWVhY2giOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5zcGxpY2UiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5mdW5jdGlvbi5uYW1lIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5mb3ItZWFjaCI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiU3lzVXNlciIsCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGtleXdvcmRzOiAnJywKICAgICAgdXNlcnM6IFtdLAogICAgICBhbGxyb2xlczogW10sCiAgICAgIHNlbGVjdGVkUm9sZXM6IFtdCiAgICB9OwogIH0sCiAgbW91bnRlZDogZnVuY3Rpb24gbW91bnRlZCgpIHsKICAgIHRoaXMuaW5pdFVzZXJzKCk7CiAgfSwKICBtZXRob2RzOiB7CiAgICBkZWxldGVVc2VyOiBmdW5jdGlvbiBkZWxldGVVc2VyKHVzZXIpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHRoaXMuJGNvbmZpcm0oJ+atpOaTjeS9nOWwhuawuOS5heWIoOmZpOOAkCcgKyB1c2VyLm5hbWUgKyAn44CRLCDmmK/lkKbnu6fnu60/JywgJ+aPkOekuicsIHsKICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogJ+ehruWumicsCiAgICAgICAgY2FuY2VsQnV0dG9uVGV4dDogJ+WPlua2iCcsCiAgICAgICAgdHlwZTogJ3dhcm5pbmcnCiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgIF90aGlzLmRlbGV0ZVJlcXVlc3QoIi9zeXN0ZW0vdXNlci8iICsgdXNlci5pZCkudGhlbihmdW5jdGlvbiAocmVzcCkgewogICAgICAgICAgaWYgKHJlc3ApIHsKICAgICAgICAgICAgX3RoaXMuaW5pdFVzZXJzKCk7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uICgpIHsKICAgICAgICBfdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgICB0eXBlOiAnaW5mbycsCiAgICAgICAgICBtZXNzYWdlOiAn5bey5Y+W5raI5Yig6ZmkJwogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0sCiAgICBkb1NlYXJjaDogZnVuY3Rpb24gZG9TZWFyY2goKSB7CiAgICAgIHRoaXMuaW5pdFVzZXJzKCk7CiAgICB9LAogICAgaGlkZVBvcDogZnVuY3Rpb24gaGlkZVBvcCh1c2VyKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgdmFyIHJvbGVzID0gW107CiAgICAgIE9iamVjdC5hc3NpZ24ocm9sZXMsIHVzZXIucm9sZXMpOwogICAgICB2YXIgZmxhZyA9IGZhbHNlOwoKICAgICAgaWYgKHJvbGVzLmxlbmd0aCAhPSB0aGlzLnNlbGVjdGVkUm9sZXMubGVuZ3RoKSB7CiAgICAgICAgZmxhZyA9IHRydWU7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCByb2xlcy5sZW5ndGg7IGkrKykgewogICAgICAgICAgdmFyIHJvbGUgPSByb2xlc1tpXTsKCiAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IHRoaXMuc2VsZWN0ZWRSb2xlcy5sZW5ndGg7IGorKykgewogICAgICAgICAgICB2YXIgc3IgPSB0aGlzLnNlbGVjdGVkUm9sZXNbal07CgogICAgICAgICAgICBpZiAocm9sZS5pZCA9PSBzcikgewogICAgICAgICAgICAgIHJvbGVzLnNwbGljZShpLCAxKTsKICAgICAgICAgICAgICBpLS07CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGlmIChyb2xlcy5sZW5ndGggIT0gMCkgewogICAgICAgICAgZmxhZyA9IHRydWU7CiAgICAgICAgfQogICAgICB9CgogICAgICBpZiAoZmxhZykgewogICAgICAgIHZhciB1cmwgPSAnL3N5c3RlbS91c2VyL3JvbGU/dXNlcmlkPScgKyB1c2VyLmlkOwogICAgICAgIHRoaXMuc2VsZWN0ZWRSb2xlcy5mb3JFYWNoKGZ1bmN0aW9uIChzcikgewogICAgICAgICAgdXJsICs9ICcmdWlkcz0nICsgc3I7CiAgICAgICAgfSk7CiAgICAgICAgdGhpcy5wdXRSZXF1ZXN0KHVybCkudGhlbihmdW5jdGlvbiAocmVzcCkgewogICAgICAgICAgaWYgKHJlc3ApIHsKICAgICAgICAgICAgX3RoaXMyLmluaXRVc2VycygpOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9CiAgICB9LAogICAgc2hvd1BvcDogZnVuY3Rpb24gc2hvd1BvcCh1c2VyKSB7CiAgICAgIHZhciBfdGhpczMgPSB0aGlzOwoKICAgICAgdGhpcy5pbml0QWxsUm9sZXMoKTsKICAgICAgdmFyIHJvbGVzID0gdXNlci5yb2xlczsKICAgICAgdGhpcy5zZWxlY3RlZFJvbGVzID0gW107CiAgICAgIHJvbGVzLmZvckVhY2goZnVuY3Rpb24gKHIpIHsKICAgICAgICBfdGhpczMuc2VsZWN0ZWRSb2xlcy5wdXNoKHIuaWQpOwogICAgICB9KTsKICAgIH0sCiAgICBpbml0QWxsUm9sZXM6IGZ1bmN0aW9uIGluaXRBbGxSb2xlcygpIHsKICAgICAgdmFyIF90aGlzNCA9IHRoaXM7CgogICAgICB0aGlzLmdldFJlcXVlc3QoIi9zeXN0ZW0vdXNlci9yb2xlcy8iKS50aGVuKGZ1bmN0aW9uIChyZXNwKSB7CiAgICAgICAgaWYgKHJlc3ApIHsKICAgICAgICAgIF90aGlzNC5hbGxyb2xlcyA9IHJlc3A7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICBpbml0VXNlcnM6IGZ1bmN0aW9uIGluaXRVc2VycygpIHsKICAgICAgdmFyIF90aGlzNSA9IHRoaXM7CgogICAgICB0aGlzLmdldFJlcXVlc3QoIi9zeXN0ZW0vdXNlci8/a2V5d29yZHM9IiArIHRoaXMua2V5d29yZHMpLnRoZW4oZnVuY3Rpb24gKHJlc3ApIHsKICAgICAgICBpZiAocmVzcCkgewogICAgICAgICAgX3RoaXM1LnVzZXJzID0gcmVzcDsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIGVuYWJsZWRDaGFuZ2U6IGZ1bmN0aW9uIGVuYWJsZWRDaGFuZ2UodXNlcikgewogICAgICB2YXIgX3RoaXM2ID0gdGhpczsKCiAgICAgIGNvbnNvbGUubG9nKHVzZXIpOwogICAgICBkZWxldGUgdXNlci5yb2xlczsKICAgICAgdGhpcy5wdXRSZXF1ZXN0KCIvc3lzdGVtL3VzZXIvIiwgdXNlcikudGhlbihmdW5jdGlvbiAocmVzcCkgewogICAgICAgIGlmIChyZXNwKSB7CiAgICAgICAgICBfdGhpczYuaW5pdFVzZXJzKCk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0KICB9Cn07"},{"version":3,"sources":["SysUser.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n    <div>\n        <div style=\"margin-top: 10px;display:flex;justify-content:center\" >\n            <el-input v-model=\"keywords\" placeholder=\"通过用户名搜索用户...\" prefix-icon=\"el-icon-search\" style=\"width:400px; margin-right: 10px\" size=\"small\"@keydown.enter.native=\"doSearch\"></el-input>\n            <el-button icon=\"el-icon-search\" type=\"primary\" size=\"small\" @click=\"doSearch\">搜索</el-button>\n        </div>\n        <div class=\"user-container\">\n            <el-card class=\"user-card\" v-for=\"(user,index) in users\" :key=\"index\">\n                <div slot=\"header\" class=\"clearfix\">\n                    <span>{{user.name}}</span>\n                    <el-button style=\"float: right; padding: 3px 0;color:#e30007\" type=\"text\" icon=\"el-icon-delete\" @click=\"deleteUser(user)\"></el-button>\n                </div>\n                <div>\n                    <div class=\"img-container\">\n                        <img :src=\"user.userface\" :alt=\"user.name\" :title=\"user.name\" class=\"userface-img\">\n                    </div>\n                    <div class=\"userinfo-container\">\n                        <div>\n                            <div>用户名：{{user.name}}</div>\n                            <div>手机号码：{{user.phone}}</div>\n                            <div>电话号码：{{user.telephone}}</div>\n                            <div>地址：{{user.address}}</div>\n                            <div>用户状态：<el-switch\n                                    v-model=\"user.enabled\"\n                                    active-color=\"#13ce66\"\n                                    inactive-color=\"#ff4949\"\n                                    active-text=\"启用\"\n                                    inactive-text=\"禁用\"\n                                    @change=\"enabledChange(user)\">\n                            </el-switch> </div>\n                            <div>用户角色：\n                                <el-tag type=\"success\" style=\"margin-right: 4px;\" size=\"small\" v-for=\"(role,indexj) in user.roles\" :key=\"indexj\">{{role.nameZh}}</el-tag>\n                                <el-popover\n                                        placement=\"right\"\n                                        title=\"角色列表\"\n                                        @show=\"showPop(user)\"\n                                        width=\"200\"\n                                        @hide=\"hidePop(user)\"\n                                        trigger=\"click\">\n                                    <el-select v-model=\"selectedRoles\" multiple placeholder=\"请选择\" size=\"small\">\n                                        <el-option\n                                                v-for=\"(r,index) in allroles\"\n                                                :key=\"indexk\"\n                                                :label=\"r.nameZh\"\n                                                :value=\"r.id\">\n                                        </el-option>\n                                    </el-select>\n                                    <el-button slot=\"reference\" icon=\"el-icon-more\" type=\"text\"/>\n                                </el-popover>\n                            </div>\n                            <div>备注：{{user.remark}}</div>\n                        </div>\n                    </div>\n                </div>\n            </el-card>\n        </div>\n    </div>\n</template>\n\n<script>\n    export default {\n        name: \"SysUser\",\n        data(){\n            return{\n                keywords:'',\n                users:[],\n                allroles:[],\n                selectedRoles:[]\n            }\n        },\n        mounted() {\n            this.initUsers();\n        },\n        methods:{\n            deleteUser(user){\n                this.$confirm('此操作将永久删除【'+user.name+'】, 是否继续?', '提示', {\n                    confirmButtonText: '确定',\n                    cancelButtonText: '取消',\n                    type: 'warning'\n                }).then(() => {\n                    this.deleteRequest(\"/system/user/\"+user.id).then(resp=>{\n                        if(resp){\n                            this.initUsers();\n                        }\n                    })\n                }).catch(() => {\n                    this.$message({\n                        type: 'info',\n                        message: '已取消删除'\n                    });\n                });\n            },\n            doSearch(){\n                this.initUsers();\n            },\n            hidePop(user){\n                let roles=[];\n                Object.assign(roles,user.roles);\n                let flag=false;\n                if(roles.length!=this.selectedRoles.length){\n                    flag=true;\n                }else{\n                    for(let i=0;i<roles.length;i++){\n                        let role=roles[i];\n                        for(let j=0;j<this.selectedRoles.length;j++){\n                            let sr=this.selectedRoles[j];\n                            if(role.id==sr){\n                                roles.splice(i,1);\n                                i--;\n                                break;\n                            }\n                        }\n                    }\n                    if(roles.length!=0){\n                        flag=true;\n                    }\n                }\n                if(flag){\n                    let url='/system/user/role?userid='+user.id;\n                    this.selectedRoles.forEach(sr=>{\n                        url+='&uids='+sr;\n                    })\n                    this.putRequest(url).then(resp=>{\n                        if(resp){\n                            this.initUsers();\n                        }\n                    })\n                }\n            },\n            showPop(user){\n                this.initAllRoles();\n                let roles=user.roles;\n                this.selectedRoles=[];\n                roles.forEach(r=>{\n                    this.selectedRoles.push(r.id);\n                })\n            },\n            initAllRoles(){\n              this.getRequest(\"/system/user/roles/\").then(resp=>{\n                  if(resp){\n                      this.allroles=resp;\n                  }\n              })\n            },\n            initUsers(){\n                this.getRequest(\"/system/user/?keywords=\"+this.keywords).then(resp=>{\n                    if(resp){\n                        this.users=resp;\n                    }\n                })\n            },\n            enabledChange(user){\n                console.log(user);\n                delete user.roles;\n                this.putRequest(\"/system/user/\",user).then(resp=>{\n                    if(resp){\n                        this.initUsers();\n                    }\n                })\n            }\n        }\n    }\n</script>\n\n<style scoped>\n    .img-container{\n        width: 100%;\n        display: flex;\n        justify-content: center;\n    }\n    .userface-img{\n        width: 50px;\n        height: 50px;\n        border-radius: 50px;\n    }\n    .user-container{\n        margin-top: 20px;\n        display: flex;\n        flex-wrap: wrap;\n        /*justify-content: space-around;*/\n    }\n    .user-card{\n        width:350px;\n        margin-bottom: 20px;\n        margin-right: 20px;\n    }\n    .userinfo-container{\n        margin-top: 10px;\n    }\n    .userinfo-container div{\n        font-size: 13px;\n        color: #0099FF;\n    }\n</style>"],"sourceRoot":"src/views/sys"}]}