{"remainingRequest":"/Users/selina/Documents/Vueworkspace/vuewebstrom/yourparttime/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/selina/Documents/Vueworkspace/vuewebstrom/yourparttime/src/views/UserInfo.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/selina/Documents/Vueworkspace/vuewebstrom/yourparttime/src/views/UserInfo.vue","mtime":1589092543196},{"path":"/Users/selina/Documents/Vueworkspace/vuewebstrom/yourparttime/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/selina/Documents/Vueworkspace/vuewebstrom/yourparttime/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/selina/Documents/Vueworkspace/vuewebstrom/yourparttime/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/selina/Documents/Vueworkspace/vuewebstrom/yourparttime/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmV4cG9ydCBkZWZhdWx0IHsKICAgIG5hbWU6ICJVc2VyaW5mbyIsCiAgICBkYXRhKCkgewogICAgICAgIHZhciB2YWxpZGF0ZVBhc3MgPSAocnVsZSwgdmFsdWUsIGNhbGxiYWNrKSA9PiB7CiAgICAgICAgICAgIGlmICh2YWx1ZSA9PT0gJycpIHsKICAgICAgICAgICAgICAgIGNhbGxiYWNrKG5ldyBFcnJvcign6K+36L6T5YWl5a+G56CBJykpOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgaWYgKHRoaXMucnVsZUZvcm0uY2hlY2tQYXNzICE9PSAnJykgewogICAgICAgICAgICAgICAgICAgIHRoaXMuJHJlZnMucnVsZUZvcm0udmFsaWRhdGVGaWVsZCgnY2hlY2tQYXNzJyk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBjYWxsYmFjaygpOwogICAgICAgICAgICB9CiAgICAgICAgfTsKICAgICAgICB2YXIgdmFsaWRhdGVQYXNzMiA9IChydWxlLCB2YWx1ZSwgY2FsbGJhY2spID0+IHsKICAgICAgICAgICAgaWYgKHZhbHVlID09PSAnJykgewogICAgICAgICAgICAgICAgY2FsbGJhY2sobmV3IEVycm9yKCfor7flho3mrKHovpPlhaXlr4bnoIEnKSk7CiAgICAgICAgICAgIH0gZWxzZSBpZiAodmFsdWUgIT09IHRoaXMucnVsZUZvcm0ucGFzcykgewogICAgICAgICAgICAgICAgY2FsbGJhY2sobmV3IEVycm9yKCfkuKTmrKHovpPlhaXlr4bnoIHkuI3kuIDoh7QhJykpOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgY2FsbGJhY2soKTsKICAgICAgICAgICAgfQogICAgICAgIH07CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgcnVsZUZvcm06IHsKICAgICAgICAgICAgICAgIG9sZHBhc3M6ICcnLAogICAgICAgICAgICAgICAgcGFzczogJycsCiAgICAgICAgICAgICAgICBjaGVja1Bhc3M6ICcnCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHJ1bGVzOiB7CiAgICAgICAgICAgICAgICBvbGRwYXNzOiBbCiAgICAgICAgICAgICAgICAgICAge3ZhbGlkYXRvcjogdmFsaWRhdGVQYXNzLCB0cmlnZ2VyOiAnYmx1cid9CiAgICAgICAgICAgICAgICBdLAogICAgICAgICAgICAgICAgcGFzczogWwogICAgICAgICAgICAgICAgICAgIHt2YWxpZGF0b3I6IHZhbGlkYXRlUGFzcywgdHJpZ2dlcjogJ2JsdXInfQogICAgICAgICAgICAgICAgXSwKICAgICAgICAgICAgICAgIGNoZWNrUGFzczogWwogICAgICAgICAgICAgICAgICAgIHt2YWxpZGF0b3I6IHZhbGlkYXRlUGFzczIsIHRyaWdnZXI6ICdibHVyJ30KICAgICAgICAgICAgICAgIF0KICAgICAgICAgICAgfSwKICAgICAgICAgICAgdXNlcjogbnVsbCwKICAgICAgICAgICAgdXNlcjI6IG51bGwsCiAgICAgICAgICAgIGRpYWxvZ1Zpc2libGU6IGZhbHNlLAogICAgICAgICAgICBwYXNzd2REaWFsb2dWaXNpYmxlOiBmYWxzZQogICAgICAgIH0KICAgIH0sCiAgICBtb3VudGVkKCkgewogICAgICAgIHRoaXMuaW5pdFVzZXIoKTsKICAgIH0sCiAgICBtZXRob2RzOiB7CiAgICAgICAgb25TdWNjZXNzKCkgewogICAgICAgICAgICB0aGlzLmluaXRVc2VyKCk7CiAgICAgICAgfSwKICAgICAgICB1cGRhdGVIckluZm8oKSB7CiAgICAgICAgICAgIHRoaXMucHV0UmVxdWVzdCgiL3VzZXIvaW5mbyIsIHRoaXMuVXNlcjIpLnRoZW4ocmVzcCA9PiB7CiAgICAgICAgICAgICAgICBpZiAocmVzcCkgewogICAgICAgICAgICAgICAgICAgIHRoaXMuZGlhbG9nVmlzaWJsZSA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgIHRoaXMuaW5pdFVzZXIoKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSkKICAgICAgICB9LAogICAgICAgIHNob3dVcGRhdGVIckluZm9WaWV3KCkgewogICAgICAgICAgICB0aGlzLmRpYWxvZ1Zpc2libGUgPSB0cnVlOwogICAgICAgIH0sCiAgICAgICAgc3VibWl0Rm9ybShmb3JtTmFtZSkgewogICAgICAgICAgICB0aGlzLiRyZWZzW2Zvcm1OYW1lXS52YWxpZGF0ZSgodmFsaWQpID0+IHsKICAgICAgICAgICAgICAgIGlmICh2YWxpZCkgewogICAgICAgICAgICAgICAgICAgIHRoaXMucnVsZUZvcm0uaHJpZCA9IHRoaXMudXNlci5pZDsKICAgICAgICAgICAgICAgICAgICB0aGlzLnB1dFJlcXVlc3QoIi9oci9wYXNzIiwgdGhpcy5ydWxlRm9ybSkudGhlbihyZXNwID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3ApIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZ2V0UmVxdWVzdCgiL2xvZ291dCIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LnNlc3Npb25TdG9yYWdlLnJlbW92ZUl0ZW0oInVzZXIiKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCdpbml0Um91dGVzJywgW10pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kcm91dGVyLnJlcGxhY2UoIi8iKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgfSwKICAgICAgICByZXNldEZvcm0oZm9ybU5hbWUpIHsKICAgICAgICAgICAgdGhpcy4kcmVmc1tmb3JtTmFtZV0ucmVzZXRGaWVsZHMoKTsKICAgICAgICB9LAogICAgICAgIHNob3dVcGRhdGVQYXNzd2RWaWV3KCkgewogICAgICAgICAgICB0aGlzLnBhc3N3ZERpYWxvZ1Zpc2libGUgPSB0cnVlOwogICAgICAgIH0sCiAgICAgICAgaW5pdFVzZXIoKSB7CiAgICAgICAgICAgIHRoaXMuZ2V0UmVxdWVzdCgnL3VzZXIvaW5mbycpLnRoZW4ocmVzcCA9PiB7CiAgICAgICAgICAgICAgICBpZiAocmVzcCkgewogICAgICAgICAgICAgICAgICAgIHRoaXMudXNlciA9IHJlc3A7CiAgICAgICAgICAgICAgICAgICAgdGhpcy51c2VyMiA9IE9iamVjdC5hc3NpZ24oe30sIHRoaXMuaHIpOwogICAgICAgICAgICAgICAgICAgIHdpbmRvdy5zZXNzaW9uU3RvcmFnZS5zZXRJdGVtKCJ1c2VyIiwgSlNPTi5zdHJpbmdpZnkocmVzcCkpOwogICAgICAgICAgICAgICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgnSU5JVF9DVVJSRU5USFInLCByZXNwKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSkKICAgICAgICB9CiAgICB9Cn0K"},{"version":3,"sources":["UserInfo.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8GA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"UserInfo.vue","sourceRoot":"src/views","sourcesContent":["<template>\n    <div v-if=\"user\">\n        <el-card class=\"box-card\" style=\"width: 400px\">\n            <div slot=\"header\" class=\"clearfix\">\n                <span>{{user.name}}</span>\n            </div>\n            <div>\n                <div style=\"display: flex;justify-content: center\">\n                    <el-upload\n                            :show-file-list=\"false\"\n                            :on-success=\"onSuccess\"\n                            :data=\"user\"\n                            action=\"/user/userface\">\n                        <img title=\"点击修改用户图像\" :src=\"user.userface\" style=\"width: 100px;height: 100px;border-radius: 50px\"\n                             alt=\"\">\n                    </el-upload>\n                </div>\n                <div>电话号码：\n                    <el-tag>{{user.telephone}}</el-tag>\n                </div>\n                <div>手机号码：\n                    <el-tag>{{user.phone}}</el-tag>\n                </div>\n                <div>居住地址：\n                    <el-tag>{{user.address}}</el-tag>\n                </div>\n                <div>用户标签：\n                    <el-tag type=\"success\" style=\"margin-right: 5px\" v-for=\"(u,index) in user.roles\" :key=\"index\">\n                        {{u.nameZh}}\n                    </el-tag>\n                </div>\n                <div style=\"display: flex;justify-content: space-around;margin-top: 10px\">\n                    <el-button type=\"primary\" @click=\"showUpdateHrInfoView\">修改信息</el-button>\n                    <el-button type=\"danger\" @click=\"showUpdatePasswdView\">修改密码</el-button>\n                </div>\n            </div>\n        </el-card>\n        <el-dialog\n                title=\"修改用户信息\"\n                :visible.sync=\"dialogVisible\"\n                width=\"30%\">\n            <div>\n                <table>\n                    <tr>\n                        <td>\n                            <el-tag>用户昵称：</el-tag>\n                        </td>\n                        <td>\n                            <el-input v-model=\"user2.name\"></el-input>\n                        </td>\n                    </tr>\n                    <tr>\n                        <td>\n                            <el-tag>电话号码：</el-tag>\n                        </td>\n                        <td>\n                            <el-input v-model=\"user2.telephone\"></el-input>\n                        </td>\n                    </tr>\n                    <tr>\n                        <td>\n                            <el-tag>手机号码：</el-tag>\n                        </td>\n                        <td>\n                            <el-input v-model=\"user2.phone\"></el-input>\n                        </td>\n                    </tr>\n                    <tr>\n                        <td>\n                            <el-tag>用户地址：</el-tag>\n                        </td>\n                        <td>\n                            <el-input v-model=\"user2.address\"></el-input>\n                        </td>\n                    </tr>\n                </table>\n            </div>\n            <span slot=\"footer\" class=\"dialog-footer\">\n    <el-button @click=\"dialogVisible = false\">取 消</el-button>\n    <el-button type=\"primary\" @click=\"updateHrInfo\">确 定</el-button>\n  </span>\n        </el-dialog>\n        <el-dialog\n                title=\"修改密码\"\n                :visible.sync=\"passwdDialogVisible\"\n                width=\"30%\">\n            <div>\n                <el-form :model=\"ruleForm\" status-icon :rules=\"rules\" ref=\"ruleForm\" label-width=\"100px\"\n                         class=\"demo-ruleForm\">\n                    <el-form-item label=\"请输入旧密码\" prop=\"oldpass\">\n                        <el-input type=\"password\" v-model=\"ruleForm.oldpass\" autocomplete=\"off\"></el-input>\n                    </el-form-item>\n                    <el-form-item label=\"请输入新密码\" prop=\"pass\">\n                        <el-input type=\"password\" v-model=\"ruleForm.pass\" autocomplete=\"off\"></el-input>\n                    </el-form-item>\n                    <el-form-item label=\"新确认密码\" prop=\"checkPass\">\n                        <el-input type=\"password\" v-model=\"ruleForm.checkPass\" autocomplete=\"off\"></el-input>\n                    </el-form-item>\n                    <el-form-item>\n                        <el-button type=\"primary\" @click=\"submitForm('ruleForm')\">提交</el-button>\n                        <el-button @click=\"resetForm('ruleForm')\">重置</el-button>\n                    </el-form-item>\n                </el-form>\n            </div>\n        </el-dialog>\n\n    </div>\n</template>\n\n<script>\n    export default {\n        name: \"Userinfo\",\n        data() {\n            var validatePass = (rule, value, callback) => {\n                if (value === '') {\n                    callback(new Error('请输入密码'));\n                } else {\n                    if (this.ruleForm.checkPass !== '') {\n                        this.$refs.ruleForm.validateField('checkPass');\n                    }\n                    callback();\n                }\n            };\n            var validatePass2 = (rule, value, callback) => {\n                if (value === '') {\n                    callback(new Error('请再次输入密码'));\n                } else if (value !== this.ruleForm.pass) {\n                    callback(new Error('两次输入密码不一致!'));\n                } else {\n                    callback();\n                }\n            };\n            return {\n                ruleForm: {\n                    oldpass: '',\n                    pass: '',\n                    checkPass: ''\n                },\n                rules: {\n                    oldpass: [\n                        {validator: validatePass, trigger: 'blur'}\n                    ],\n                    pass: [\n                        {validator: validatePass, trigger: 'blur'}\n                    ],\n                    checkPass: [\n                        {validator: validatePass2, trigger: 'blur'}\n                    ]\n                },\n                user: null,\n                user2: null,\n                dialogVisible: false,\n                passwdDialogVisible: false\n            }\n        },\n        mounted() {\n            this.initUser();\n        },\n        methods: {\n            onSuccess() {\n                this.initUser();\n            },\n            updateHrInfo() {\n                this.putRequest(\"/user/info\", this.User2).then(resp => {\n                    if (resp) {\n                        this.dialogVisible = false;\n                        this.initUser();\n                    }\n                })\n            },\n            showUpdateHrInfoView() {\n                this.dialogVisible = true;\n            },\n            submitForm(formName) {\n                this.$refs[formName].validate((valid) => {\n                    if (valid) {\n                        this.ruleForm.hrid = this.user.id;\n                        this.putRequest(\"/hr/pass\", this.ruleForm).then(resp => {\n                            if (resp) {\n                                this.getRequest(\"/logout\");\n                                window.sessionStorage.removeItem(\"user\")\n                                this.$store.commit('initRoutes', []);\n                                this.$router.replace(\"/\");\n                            }\n                        })\n                    } else {\n                        return false;\n                    }\n                });\n            },\n            resetForm(formName) {\n                this.$refs[formName].resetFields();\n            },\n            showUpdatePasswdView() {\n                this.passwdDialogVisible = true;\n            },\n            initUser() {\n                this.getRequest('/user/info').then(resp => {\n                    if (resp) {\n                        this.user = resp;\n                        this.user2 = Object.assign({}, this.hr);\n                        window.sessionStorage.setItem(\"user\", JSON.stringify(resp));\n                        this.$store.commit('INIT_CURRENTHR', resp);\n                    }\n                })\n            }\n        }\n    }\n</script>\n\n<style scoped>\n\n</style>"]}]}